---
title: "TIF Data Iowa visualization"
author: "Vaishnavi Devi Kondabathini"
date: "2026-01-09" 
output:
  md_document:
    variant: gfm
output_file: "README.md"
---

# Summary: 
Here we have all 6 data sets of Tax increment Finance and their comparisons with counties, TIF and School districts valuations etc...
and I have done all the data sets in the TIF Iowa data and I have completed this project by taking reference by my previous class lectures and project.

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(maps)
library(tidyverse)
library(dplyr)
library(scales)
```

Here, I am using creating csv data file for the Tax increament finance (TIF)

```{r}
# Load the correct library for Excel files
library(readxl)

# Use read_excel instead of read_csv for .xlsx files
TIF_data_Iowa <- read_excel("C:/Users/vaish/Downloads/TIF data Iowa.xlsx")

# Now it should show the data table as separate page
View(TIF_data_Iowa)


summary(TIF_data_Iowa)

#colnames(TIF_data_Iowa)

#names(TIF_data_Iowa)

#dim(TIF_data_Iowa)

#head(TIF_data_Iowa)

#glimpse(TIF_data_Iowa)
```

here I have made graph for Assessment Year, Estimated Revenue ($ Millions) which can readable and understandable.

```{r}
final_plot_data <- TIF_data_Iowa %>%
  filter(!is.na(...1))

ggplot(final_plot_data,
       aes(x = as.numeric(...1),
           y = `Estimated TIF Revenues ($ Millions)`)) +
  geom_line(color = "#2c3e50", linewidth = 1.2) +
  geom_point(color = "#e74c3c", size = 3) +
  theme_minimal() +
  scale_y_continuous(labels = label_dollar()) +
  scale_x_continuous(breaks = seq(2000, 2021, by = 2)) +
  labs(
    title = "Projected TIF Revenues Over Time",
    subtitle = "Iowa Urban Renewal Analysis (2000-2021)",
    x = "Assessment Year",
    y = "Estimated Revenue ($ Millions)",
    caption = "Source: TIF data Iowa"
  ) +
  theme(plot.title = element_text(face = "bold", size = 14))
```

## Based on Years

I have created a table so that I can understand the table and we can make graphs based the given table.

```{r}
# Load the tidyverse library for data manipulation and clean tables
library(tidyverse)

# Create the data frame based on the provided images
tif_table <- tibble(
  Base_Year = c(
    "1981", "1982", "1983", "1984", "1985", "1986", "1987", "1988", "1989", "1990",
    "1991", "1992", "1993", "1994", "1995", "1996", "1997", "1998", "1999", "2000",
    "2001", "2002", "2003", "2004", "2005", "2006", "2007", "2008", "2009", "2010",
    "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020*", "2021*"
  ),
  Count = c(
    1, 3, 4, 3, 10, 11, 22, 37, 40, 40, 26, 56, 80, 39, 17, 19, 13, 9, 29, 34,
    38, 70, 46, 38, 35, 46, 56, 56, 53, 76, 65, 87, 72, 71, 88, 81, 102, 107, 109, 89, 8
  ),
  Frozen_Base_Valuation_Millions = c(
    1.80, 123.00, 42.40, 20.20, 57.30, 40.90, 258.80, 446.60, 271.20, 327.70,
    162.40, 489.60, 532.50, 213.30, 53.40, 213.80, 100.30, 173.10, 803.20, 215.90,
    96.30, 577.00, 191.50, 297.60, 158.10, 390.80, 339.50, 146.20, 394.70, 654.40,
    536.50, 147.80, 209.10, 504.10, 449.90, 1228.80, 629.50, 405.60, 127.00, 216.70, 52.30
  ),
  Incremental_Valuation_Millions = c(
    3.60, 311.30, 81.00, 20.50, 81.30, 165.70, 407.80, 913.10, 684.50, 388.90,
    384.90, 884.80, 801.30, 213.60, 48.30, 172.60, 154.90, 160.50, 492.20, 491.10,
    136.40, 518.10, 227.60, 204.10, 138.00, 393.50, 379.20, 440.40, 308.90, 243.10,
    190.80, 526.20, 432.30, 366.00, 518.40, 510.70, 531.30, 756.90, 364.60, 131.90, 2.40
  ),
  TIF_Estimated_Revenues_Millions = c(
    0.10, 11.70, 2.50, 0.50, 2.60, 5.30, 12.90, 26.90, 19.90, 11.10,
    11.20, 28.10, 23.10, 6.10, 1.40, 4.20, 4.40, 5.30, 15.30, 14.80,
    3.60, 14.90, 6.20, 6.10, 4.00, 10.20, 10.10, 9.60, 7.70, 6.00,
    5.60, 13.80, 11.60, 11.10, 14.90, 15.10, 13.00, 20.00, 9.00, 2.10, 0.02
  )
)

# View the table
print(tif_table)

# Optional: View as an interactive spreadsheet in RStudio
#View(tif_table)
```

can you create the base year graph by compare with each year.

```{r}
# Load necessary libraries
library(ggplot2)
library(dplyr)
```

The above graph is count and TIF Estimated Revenues ($ Millions) with bar graph.

```{r}
# 1. Prepare the dataset (Data sourced from provided tables)
tif_data <- data.frame(
  Year = 1981:2021,
  Count = c(1, 3, 4, 3, 10, 11, 22, 37, 40, 40, 26, 56, 80, 39, 17, 19, 13, 9, 29, 34, 
            38, 70, 46, 38, 35, 46, 56, 56, 53, 76, 65, 87, 72, 71, 88, 81, 102, 107, 109, 89, 8),
  Revenue = c(0.1, 11.7, 2.5, 0.5, 2.6, 5.3, 12.9, 26.9, 19.9, 11.1, 11.2, 28.1, 23.1, 6.1, 1.4, 
              4.2, 4.4, 5.3, 15.3, 14.8, 3.6, 14.9, 6.2, 6.1, 4.0, 10.2, 10.1, 9.6, 7.7, 6.0, 
              5.6, 13.8, 11.6, 11.1, 14.9, 15.1, 13.0, 20.0, 9.0, 2.1, 0.02)
)

# 2. Define the scaling factor for the second axis
# Since Count goes up to ~110 and Revenue to ~30, we multiply Revenue by 4 to align them
scale_factor <- 4

# 3. Create the Dual-Axis Visualization
ggplot(tif_data, aes(x = Year)) +
  # Bar chart for Project Count (Primary Axis)
  geom_bar(aes(y = Count), stat = "identity", fill = "#3498db", alpha = 0.3) +
  # Line chart for TIF Revenue (Scaled to fit the Primary Axis)
  geom_line(aes(y = Revenue * scale_factor), color = "#e74c3c", size = 1) +
  # Formatting the axes
  scale_y_continuous(
    name = "Count",
    sec.axis = sec_axis(~./scale_factor, name = "TIF Estimated Revenues ($ Millions)")
  ) +
  theme_minimal() +
  labs(
    title = "Project Count vs. TIF Revenue (1981-2021)",
    x = "Year"
  ) +
  theme(
    axis.title.y = element_text(color = "#3498db", face = "bold"),
    axis.title.y.right = element_text(color = "#e74c3c", face = "bold"),
    panel.grid.minor = element_blank()
  )
```

## School Districts with TIF
```{r}
# Create the school district dataset
tif_data <- data.frame(
  Assessment_Year = 2001:2021,
  
  # School Districts without TIF
  Count_No_TIF = c(110, 98, 100, 98, 108, 107, 99, 95, 93, 87, 82, 83, 76, 74, 76, 74, 72, 80, 78, 71, 63),
  Valuation_No_TIF_Millions = c(12230.0, 10140.5, 9240.4, 10610.0, 12885.7, 12894.7, 12451.2, 12667.7, 11264.4, 11232.0, 
                                11293.6, 11682.8, 12261.5, 12796.5, 14646.2, 13175.6, 14589.7, 16036.0, 16680.3, 15456.7, 14186.8),
  
  # School Districts with TIF
  Count_With_TIF = c(260, 272, 267, 267, 257, 257, 263, 266, 266, 264, 266, 263, 262, 262, 257, 259, 258, 256, 258, 261, 264),
  TIF_Specific_Valuation_Millions = c(5227.3, 5353.6, 5988.2, 5950.1, 6864.5, 7287.9, 7987.0, 8352.0, 8493.9, 8669.5, 
                                      9228.7, 9512.1, 10272.3, 10275.0, 10830.2, 11019.2, 11398.9, 11740.0, 12967.1, 13882.5, 14663.0),
  Total_Valuation_With_TIF_Districts = c(92202.8, 96859.1, 95417.4, 96126.9, 99694.4, 102601.9, 110052.2, 115806.9, 122624.4, 128146.7, 
                                         133436.3, 138700.7, 141823.3, 144536.4, 149721.7, 157557.9, 164681.6, 199418.7, 193060.6, 202224.4, 213226.5),
  
  # Aggregate Totals
  Total_Revenues_Millions = c(1219.9, 1264.7, 1289.3, 1323.3, 1394.2, 1443.5, 1530.2, 1621.9, 1754.4, 1803.0, 
                              1787.1, 1679.2, 1679.8, 1709.1, 1774.6, 1836.8, 1899.8, 2081.2, 2150.5, 2187.3, 2218.7)
)

# --- COMMAND TO VIEW IN RSTUDIO ---
view(tif_data)
```

```{r}
# Load libraries
library(ggplot2)
library(dplyr)

# 1. Prepare Data
data <- data.frame(
  Year = 2001:2021,
  Count_No_TIF = c(110, 98, 100, 98, 108, 107, 99, 95, 93, 87, 82, 83, 76, 74, 76, 74, 72, 80, 78, 71, 63),
  Count_With_TIF = c(260, 272, 267, 267, 257, 257, 263, 266, 266, 264, 266, 263, 262, 262, 257, 259, 258, 256, 258, 261, 264),
  Val_No_TIF = c(12230.0, 10140.5, 9240.4, 10610.0, 12885.7, 12894.7, 12451.2, 12667.7, 11264.4, 11232.0, 
                 11293.6, 11682.8, 12261.5, 12796.5, 14646.2, 13175.6, 14589.7, 16036.0, 16680.3, 15456.7, 14186.8),
  Val_With_TIF = c(92202.8, 96859.1, 95417.4, 96126.9, 99694.4, 102601.9, 110052.2, 115806.9, 122624.4, 128146.7, 
                   133436.3, 138700.7, 141823.3, 144536.4, 149721.7, 157557.9, 164681.6, 199418.7, 193060.6, 202224.4, 213226.5)
) %>%
  mutate(Val_No_TIF_B = Val_No_TIF / 1000,
         Val_With_TIF_B = Val_With_TIF / 1000)

# --- GRAPH P1: DISTRICT COUNTS ---
p1 <- ggplot(data) +
  geom_line(aes(x = Year, y = Count_No_TIF, color = "Districts without TIF"), linewidth = 1) +
  geom_point(aes(x = Year, y = Count_No_TIF, color = "Districts without TIF"), shape = 16, size = 3) +
  geom_line(aes(x = Year, y = Count_With_TIF, color = "Districts with TIF"), linewidth = 1) +
  geom_point(aes(x = Year, y = Count_With_TIF, color = "Districts with TIF"), shape = 15, size = 3) +
  scale_color_manual(values = c("Districts without TIF" = "#1f77b4", "Districts with TIF" = "#ff7f0e")) +
  scale_x_continuous(breaks = seq(2001, 2021, 2)) +
  labs(title = "Comparison of School Districts: Counts",
       subtitle = "Comparing Districts with and without TIF (2001-2021)",
       x = "Year", y = "Number of Districts") +
  theme_minimal() +
  theme(legend.position = "bottom", legend.title = element_blank())

# View them as graph below
print(p1)
```

```{r}
# --- GRAPH P2: TAXABLE VALUATION ---
p2 <- ggplot(data) +
  geom_line(aes(x = Year, y = Val_No_TIF_B, color = "Without TIF"), linetype = "dashed", linewidth = 1) +
  geom_point(aes(x = Year, y = Val_No_TIF_B, color = "Without TIF"), shape = 16, size = 3) +
  geom_line(aes(x = Year, y = Val_With_TIF_B, color = "With TIF"), linetype = "dashed", linewidth = 1) +
  geom_point(aes(x = Year, y = Val_With_TIF_B, color = "With TIF"), shape = 15, size = 3) +
  scale_color_manual(values = c("Without TIF" = "#1f77b4", "With TIF" = "#ff7f0e")) +
  scale_x_continuous(breaks = seq(2001, 2021, 2)) +
  labs(title = "Comparison of School Districts: Taxable Valuation",
       subtitle = "Values in Billions of Dollars",
       x = "Year", y = "Valuation ($ Billions)") +
  theme_minimal() +
  theme(legend.position = "bottom", legend.title = element_blank())

# View them as graph below
print(p2)
```

## Top 10 couties comparision

```{r}
# Creating the data frame with updated, distinct variable names
tif_data <- data.frame(
  region_name = c("Adair", "Adams", "Allamakee", "Appanoose", "Audubon", "Benton", "Black Hawk", "Boone", "Bremer", "Buchanan", "Buena Vista", "Butler", "Calhoun", "Carroll", "Cass", "Cedar", "Cerro Gordo", "Cherokee", "Chickasaw", "Clarke", "Clay", "Clayton", "Clinton", "Crawford", "Dallas", "Davis", "Decatur", "Delaware", "Des Moines", "Dickinson", "Dubuque", "Emmet", "Fayette", "Floyd", "Franklin", "Fremont", "Greene", "Grundy", "Guthrie", "Hamilton", "Hancock", "Hardin", "Harrison", "Henry", "Howard", "Humboldt", "Ida", "Iowa", "Jackson", "Jasper", "Jefferson", "Johnson", "Jones", "Keokuk", "Kossuth", "Lee", "Linn", "Louisa", "Lucas", "Lyon", "Madison", "Mahaska", "Marion", "Marshall", "Mills", "Mitchell", "Monona", "Monroe", "Montgomery", "Muscatine", "O'Brien", "Osceola", "Page", "Palo Alto", "Plymouth", "Pocahontas", "Polk", "Pottawattamie", "Poweshiek", "Ringgold", "Sac", "Scott", "Shelby", "Sioux", "Story", "Tama", "Taylor", "Union", "Van Buren", "Wapello", "Warren", "Washington", "Wayne", "Webster", "Winnebago", "Winneshiek", "Woodbury", "Worth", "Wright", "Total"),
  tif_current_M = c(219.6, 1.4, 22.7, 21.7, 26.9, 42.4, 617.9, 42.7, 68.2, 15.5, 28.4, 91.9, 1.5, 81.3, 78.0, 32.4, 163.4, 9.9, 10.6, 17.4, 48.3, 43.4, 90.5, 7.4, 693.7, 0.2, 0.0, 71.8, 136.4, 221.0, 602.0, 4.2, 34.3, 86.3, 28.3, 0.0, 72.0, 29.4, 233.4, 20.1, 21.4, 48.4, 9.4, 24.1, 52.9, 32.1, 146.1, 48.9, 38.7, 108.2, 12.3, 963.8, 25.1, 3.9, 20.1, 38.1, 987.1, 1.1, 10.7, 68.7, 85.4, 44.9, 63.1, 15.2, 37.9, 258.2, 8.7, 0.0, 3.7, 118.1, 136.8, 35.8, 10.2, 52.3, 181.3, 3.0, 3473.2, 153.3, 134.4, 36.0, 6.3, 534.0, 50.7, 335.2, 299.8, 28.2, 1.7, 3.8, 0.0, 53.3, 544.5, 32.0, 0.0, 220.1, 120.5, 7.0, 579.9, 159.9, 145.3, 14651.4),
  tif_limit_M = c(265.9, 1.4, 65.6, 35.9, 43.9, 96.8, 1023.3, 367.0, 175.5, 84.9, 28.4, 104.6, 1.5, 89.4, 211.7, 190.2, 467.6, 29.4, 19.4, 25.4, 246.8, 69.4, 238.6, 95.1, 1643.3, 20.6, 1.3, 259.4, 295.2, 655.7, 697.4, 15.7, 109.9, 164.7, 231.8, 24.5, 79.7, 113.7, 435.6, 95.1, 46.5, 52.8, 56.9, 328.4, 158.3, 97.4, 170.0, 86.3, 133.7, 193.9, 15.8, 1897.8, 62.2, 3.9, 118.3, 73.2, 3000.4, 1.1, 29.4, 125.2, 132.0, 297.5, 174.2, 0.0, 39.3, 285.1, 27.5, 161.3, 56.5, 225.4, 137.3, 78.7, 41.0, 155.4, 223.8, 36.3, 8485.6, 409.2, 308.1, 144.9, 6.3, 1297.9, 95.9, 415.2, 459.4, 50.8, 2.7, 9.3, 6.4, 216.2, 571.7, 103.0, 0.0, 230.2, 152.5, 7.6, 1377.1, 213.1, 175.4, 32282.8),
  taxable_val_M = c(46.2, 0.0, 43.0, 14.2, 17.0, 54.4, 405.4, 324.3, 97.1, 69.3, 0.0, 12.7, 0.0, 8.1, 133.7, 157.8, 305.2, 19.6, 8.7, 8.0, 198.4, 26.0, 148.1, 87.7, 947.3, 20.4, 0.0, 187.6, 158.8, 434.7, 95.4, 11.5, 75.6, 78.4, 203.6, 24.5, 7.7, 84.3, 202.1, 75.0, 25.1, 4.4, 47.4, 304.3, 105.4, 65.4, 14.3, 37.4, 95.0, 85.6, 3.5, 919.8, 37.1, 0.0, 98.2, 35.1, 2013.3, 0.0, 18.7, 56.5, 46.6, 252.6, 111.2, 0.0, 1.4, 25.0, 18.8, 161.3, 52.9, 107.3, 0.5, 42.9, 30.9, 102.2, 41.4, 33.3, 5002.2, 255.9, 174.1, 109.0, 0.0, 764.7, 45.2, 80.0, 159.6, 23.0, 1.0, 5.5, 6.4, 162.8, 27.3, 71.0, 0.0, 2.7, 14.0, 0.6, 797.2, 53.2, 30.1, 17572.2),
  utilization_pct = c(82.6, 100.0, 34.6, 60.3, 61.2, 43.8, 60.4, 11.6, 38.8, 18.3, 100.0, 87.8, 100.0, 91.0, 36.9, 17.0, 35.0, 33.5, 55.0, 68.4, 19.6, 62.5, 37.9, 7.8, 42.2, 0.9, 100.0, 27.7, 46.2, 33.7, 86.3, 27.0, 31.2, 52.4, 12.2, 0.0, 90.4, 25.9, 53.6, 21.1, 46.1, 91.6, 16.6, 7.3, 33.4, 33.0, 86.0, 56.7, 29.0, 55.8, 77.7, 50.8, 40.3, 100.0, 17.0, 52.0, 32.9, 100.0, 36.5, 54.9, 64.7, 15.1, 36.2, 0.0, 96.4, 90.6, 31.6, 0.0, 6.5, 52.4, 99.7, 45.5, 24.8, 33.6, 81.0, 8.3, 40.9, 37.5, 43.6, 24.8, 100.0, 41.1, 52.9, 80.7, 65.3, 55.6, 64.2, 40.7, 0.0, 24.7, 95.2, 31.1, 0.0, 95.6, 79.0, 92.0, 42.1, 75.1, 82.8, 45.4),
  val_share_pct = c(27.3, 0.4, 2.6, 4.1, 5.0, 2.5, 9.6, 2.4, 5.0, 1.2, 2.1, 8.7, 0.2, 4.8, 6.6, 2.3, 5.4, 1.0, 1.1, 3.0, 3.9, 3.7, 3.6, 0.6, 8.7, 0.0, 0.4, 4.9, 7.5, 6.5, 10.3, 0.7, 2.7, 8.4, 2.8, 0.0, 8.3, 2.6, 20.9, 1.7, 2.1, 4.2, 0.8, 2.5, 6.9, 3.8, 18.1, 4.2, 3.2, 5.4, 1.3, 9.4, 2.0, 0.5, 1.3, 2.5, 7.6, 0.2, 2.7, 5.7, 7.7, 3.8, 3.3, 0.8, 3.3, 24.9, 1.0, 0.0, 0.6, 5.3, 9.5, 5.7, 1.3, 6.4, 8.5, 0.3, 11.0, 2.7, 8.6, 8.1, 0.7, 5.2, 5.1, 13.2, 5.2, 2.4, 0.4, 0.7, 0.0, 3.9, 17.7, 2.3, 0.0, 9.9, 15.6, 0.5, 10.8, 19.2, 13.3, 7.1),
  cap_share_pct = c(33.0, 0.4, 7.6, 6.8, 8.2, 5.8, 15.9, 20.3, 12.7, 6.4, 2.1, 9.9, 0.2, 5.2, 17.9, 13.4, 15.4, 2.9, 2.1, 4.3, 20.1, 5.9, 9.6, 7.5, 20.6, 4.7, 0.4, 17.8, 16.1, 19.2, 11.9, 2.4, 8.6, 16.0, 23.3, 3.9, 9.2, 10.1, 38.9, 8.2, 4.5, 4.6, 5.0, 33.8, 20.7, 11.6, 21.1, 7.5, 11.0, 9.7, 1.6, 18.6, 5.0, 0.5, 7.7, 4.8, 23.0, 0.2, 7.4, 10.5, 11.8, 24.9, 9.1, 0.0, 3.5, 27.5, 3.1, 29.0, 9.0, 10.1, 9.5, 12.5, 5.2, 19.0, 10.5, 4.0, 26.9, 7.3, 19.8, 32.6, 0.7, 12.7, 9.6, 16.4, 7.9, 4.3, 0.7, 1.7, 1.4, 15.6, 18.6, 7.4, 0.0, 10.3, 19.7, 0.6, 25.6, 25.6, 16.1, 15.6)
)

# Opens the data frame in the RStudio data viewer
View(tif_data)
```

BELOW IS THE GRAPH CODE AND WE LIBRARY I HAVE USED.

```{r}
# Load necessary libraries
library(ggplot2)
library(tidyr)
library(dplyr)

# 1. Create the dataset based on the provided data
data <- data.frame(
  County = factor(c("Polk", "Linn", "Johnson", "Dallas", "Black Hawk", 
                    "Dubuque", "Woodbury", "Warren", "Scott", "Sioux"),
                  levels = c("Polk", "Linn", "Johnson", "Dallas", "Black Hawk", 
                             "Dubuque", "Woodbury", "Warren", "Scott", "Sioux")),
  TIF_Increment = c(3473.20, 987.10, 963.80, 693.70, 617.90, 602.00, 579.90, 544.50, 534.00, 335.20),
  TIF_Max_Increment = c(8485.60, 3000.40, 1897.80, 1643.30, 1023.30, 697.40, 1377.10, 571.70, 1297.90, 415.20),
  Total_Net_Taxable_Val = c(5002.20, 2013.30, 919.80, 947.30, 405.40, 95.40, 797.20, 27.30, 764.70, 80.00)
)

# 2. Reshape the data for plotting (Convert from wide to long format)
df_long <- data %>%
  pivot_longer(cols = -County, 
               names_to = "Metric", 
               values_to = "Value")

# 3. Create the bar chart
ggplot(df_long, aes(x = County, y = Value, fill = Metric)) +
  geom_bar(stat = "identity", position = position_dodge(width = 0.8)) +
  # Use colors similar to the provided image
  scale_fill_manual(values = c("TIF_Increment" = "#0D56D1", 
                               "TIF_Max_Increment" = "#E38C05", 
                               "Total_Net_Taxable_Val" = "#00A676"),
                    labels = c("TIF Increment ($M)", "TIF Max Increment ($M)", "Total Net Taxable Val ($M)")) +
  labs(title = "Top 10 Counties by TIF Increment - Financial Scale",
       y = "Value ($ Millions)",
       x = NULL,
       fill = NULL) +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1),
        legend.position = "top")
```


